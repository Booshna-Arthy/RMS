<ion-content padding class="headerFull-bg default-header">
<ion-header class="static-header main-header my-component no-backbtn" color="primary">
  <ion-navbar class="change-password-toolbar title-type2">
    <span class="back-arrow" (click)="goBack()">
      <img src="assets/imgs/Back.png" />
    </span>
    <ion-title class="text-left">
      <div class="calendar-title">      
      <span class="inner-title month-title">
        <ion-icon (click)="changeMonth('back')" class="arrow-left" name="arrow-dropleft"></ion-icon>{{ viewTitle }}
        <ion-icon (click)="changeMonth('forward')" class="arrow-right" name="arrow-dropright"></ion-icon>
      </span>      
      </div>
    </ion-title>
  </ion-navbar>
</ion-header>


<div class="float-right row cal-legend">
  <span class="icon-size"><i class="fas fa-circle course-icon"></i> {{constant.pages.dashboardLabels.course}}</span>
  <span class="icon-size"><i class="fa fa-circle tc-icon"></i> {{constant.pages.trainingLabels.trainingClass}}</span>
  <span class="icon-size"><i class="fa fa-circle noti-icon"></i> {{constant.title.notification}}</span>
</div>
       

  <ng-template #template let-view="view" let-row="row" let-col="col">
      <div *ngIf="view.dates[row*7+col].events">
        <div *ngFor="let obj of view.dates[row*7+col].events">
              <p [ngStyle]="{'background-color': obj.colorCode}" class="calendar-color">{{view.dates[row*7+col].label}}</p>    
          </div>
        </div>
      <div *ngIf="view.dates[row*7+col].events.length == 0">
        {{view.dates[row*7+col].label}}
        </div>
  </ng-template>

    <ng-template #eventDetail let-showEventDetail="showEventDetail" let-selectedDate="selectedDate"
      let-noEventsLabel="noEventsLabel">
      <ion-list class="event-detail-container" has-bouncing="false" *ngIf="showEventDetail" overflow-scroll="false">
        <ion-item *ngFor="let event of selectedDate?.events" (click)="onEventSelected(event)">
          <span class="event-detail">{{event.title}}</span><span> - </span>
          {{event.startTime | date:'d MMM y'}}<span class="to-txt"> To </span> {{event.endDate | date:'d MMM y'}}
        </ion-item>
        <ion-item *ngIf="selectedDate?.events.length==0">
          <div class="no-events-label">{{noEventsLabel}}</div>
        </ion-item>
      </ion-list>
    </ng-template>

  <calendar [monthviewDisplayEventTemplate]="template" [monthviewEventDetailTemplate]="eventDetail" (onEventSelected)="onEventSelected($event)" [eventSource]="eventSource" [calendarMode]="calendar.mode" [currentDate]="calendar.currentDate"
     (onTitleChanged)="onViewTitleChanged($event)"
    (onTimeSelected)="onTimeSelected($event)" step="30" class="calendar">
  </calendar>


  <ng-template #calDetail>
    <div class="popup-box">
      <div class="modal-header question-header">
        <div class="col-md-12 text-center popup-header">
          <h6 class="header-design">{{modaleventDetail.title}}</h6>
        </div>
      </div>  
      <div class="modal-body">
        <div class="hd-alg row">
          <p class="p-0 col-md-12">
            <label class="date-hd col-md-4 p-0">From Date :</label>
            <span class="date-cont col-md-8">{{modaleventDetail.startTime | date:'dd MMM yyyy' }}</span>
          </p>          
          <p class="p-0 col-md-12">
            <label class="date-hd col-md-5 p-0">To Date :</label>
            <span class="date-cont col-md-7">{{modaleventDetail.endTime | date:'dd MMM yyyy' }}</span>
          </p>          
       </div>
       <div>
           <!-- Course -->
          <div class="course-hd" *ngIf="modaleventDetail.scheduleType == 'course'">Courses:  </div>
          <p class="course-alg" *ngIf="modaleventDetail.scheduleType == 'course' && modaleventDetail.courses.length">
               <li *ngFor="let data of  modaleventDetail.courses">
                 <a class="course-click" *ngIf="modaleventDetail.status != 'expired'" (click)="navPage(data.courseId)">{{data.Course.courseName}}</a> 
                 <a class="no-nav"  *ngIf="modaleventDetail.status == 'expired'">{{data.Course.courseName}}</a> 
                </li> 
          </p> 
          <!-- TrainingClass -->
          <div class="course-hd" *ngIf="modaleventDetail.scheduleType == 'trainingClass'">Classes: </div>
          <p class="course-alg" *ngIf="modaleventDetail.scheduleType == 'trainingClass' && modaleventDetail.courses.length"> 
            <li *ngFor="let data of  modaleventDetail.courses">
              <a class="course-click" *ngIf="modaleventDetail.status != 'expired'" (click)="navPage(data.trainingClassId)">{{data.TrainingClass.trainingClassName}}</a>
              <a class="no-nav" *ngIf="modaleventDetail.status == 'expired'">{{data.TrainingClass.trainingClassName}}</a>
            </li>
          </p>
          <!-- Notification -->
            <!-- <div class="course-hd" *ngIf="modaleventDetail.scheduleType == 'notification'">Notification: </div>
            <p class="course-alg" *ngIf="modaleventDetail.scheduleType == 'notification'">
                <li>
                  <a class="course-click" *ngIf="modaleventDetail.status != 'expired'" (click)="goToNoti(modaleventDetail.notificationDetail)">{{modaleventDetail.title}}</a>
                  <a class="no-nav" *ngIf="modaleventDetail.status == 'expired'">{{modaleventDetail.title}}</a>
                </li>
            </p> -->


        </div>
        
         
          
         
      </div>
      <div class="model-footer">
        <button ion-button small clear type="button" class="btn btn-can btn-alg"
          (click)="modalRef.hide()">{{constant.buttons.ok}}</button> 
      </div>
    </div>
  </ng-template> 

</ion-content>